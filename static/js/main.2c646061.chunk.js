(this["webpackJsonpfilter-users-task"]=this["webpackJsonpfilter-users-task"]||[]).push([[0],{18:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(12),s=a.n(r),i=(a(18),a(4)),l=a(2),o=a(3);function u(){return JSON.parse(localStorage.getItem("randomPeople"))}function j(){return JSON.parse(localStorage.getItem("filteredPeople"))}function b(){return JSON.parse(localStorage.getItem("myFriends"))}function d(){return JSON.parse(localStorage.getItem("chat"))}function m(e){localStorage.setItem("randomPeople",JSON.stringify(e))}function f(e){localStorage.setItem("filteredPeople",JSON.stringify(e))}function h(e){localStorage.setItem("chat",JSON.stringify(e))}var O=a(0),x=function(e){var t=e.numberOfUsers,a=e.setNumberOfUsers,n=e.setLoadNewUsers;return Object(O.jsxs)("div",{className:"extra-buttons",children:[Object(O.jsxs)("label",{className:"label",htmlFor:"numder-of-users",children:["How many users to download",Object(O.jsx)("input",{type:"number",id:"numder-of-users",value:t,onChange:function(e){e.target.value>=50?a(50):e.target.value>0&&a(e.target.value)}})]}),Object(O.jsx)("button",{className:"button",onClick:function(){return n(!0)},children:"Load new users"})]})},v=a(9),p=function(e){var t=e.setRandomUsers,a=Object(n.useState)("all"),c=Object(o.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)([]),l=Object(o.a)(i,2),j=l[0],b=l[1],d=Object(n.useState)(18),m=Object(o.a)(d,2),h=m[0],x=m[1],p=Object(n.useState)(90),g=Object(o.a)(p,2),_=g[0],N=g[1];return Object(O.jsxs)("form",{className:"filter-form",onSubmit:function(e){return e.preventDefault()},children:[Object(O.jsx)("b",{className:"filter-form__categorie-title",children:"Categories"}),Object(O.jsxs)("label",{className:"filter-form__label",htmlFor:"filterByGender",children:[Object(O.jsx)("b",{children:"Gender"}),Object(O.jsxs)("select",{value:r,onChange:function(e){return s(e.target.value)},name:"gender",id:"filterByGender",className:"filter-form__select",children:[Object(O.jsx)("option",{value:"all",children:"All"}),Object(O.jsx)("option",{value:"male",children:"Male"}),Object(O.jsx)("option",{value:"female",children:"Female"})]})]}),Object(O.jsxs)("label",{className:"filter-form__label",htmlFor:"filterByNationality",children:[Object(O.jsx)("b",{children:"Nationality"}),Object(O.jsxs)("select",{multiple:!0,size:"5",value:j,onChange:function(e){return function(e){if(j.find((function(t){return t===e}))||b([].concat(Object(v.a)(j),[e])),j.find((function(t){return t===e}))){var t=j,a=t.indexOf(e);t.splice(a,1),b(t)}}(e.target.value)},name:"nationality",id:"filterByNationality",className:"filter-form__select",children:[Object(O.jsx)("option",{value:"AU",children:"AU"}),Object(O.jsx)("option",{value:"BR",children:"BR"}),Object(O.jsx)("option",{value:"CA",children:"CA"}),Object(O.jsx)("option",{value:"CH",children:"CH"}),Object(O.jsx)("option",{value:"DE",children:"DE"}),Object(O.jsx)("option",{value:"DK",children:"DK"}),Object(O.jsx)("option",{value:"ES",children:"ES"}),Object(O.jsx)("option",{value:"FI",children:"FI"}),Object(O.jsx)("option",{value:"FR",children:"FR"}),Object(O.jsx)("option",{value:"GB",children:"GB"}),Object(O.jsx)("option",{value:"IE",children:"IE"}),Object(O.jsx)("option",{value:"IR",children:"IR"}),Object(O.jsx)("option",{value:"NO",children:"NO"}),Object(O.jsx)("option",{value:"NL",children:"NL"}),Object(O.jsx)("option",{value:"NZ",children:"NZ"}),Object(O.jsx)("option",{value:"TR",children:"TR"}),Object(O.jsx)("option",{value:"US",children:"US"})]}),Object(O.jsx)("button",{className:"button",onClick:function(){return b([])},children:"Clear nationality filter"})]}),Object(O.jsxs)("label",{className:"filter-form__label",htmlFor:"filterByAge",children:[Object(O.jsx)("b",{children:"Age"}),Object(O.jsxs)("div",{className:"from-to",children:[Object(O.jsx)("input",{className:"filter-form__fromTo",value:h,type:"number",name:"age-from",id:"filterByAge",onChange:function(e){e.target.value>=0&&x(e.target.value),e.target.value>=_&&x(_-1)}}),"\u2014",Object(O.jsx)("input",{className:"filter-form__fromTo",value:_,type:"number",name:"age-to",id:"filterByAge",onChange:function(e){e.target.value>=0&&N(e.target.value),e.target.value<=h&&N(+h+1),e.target.value>=90&&N(90)}})]})]}),Object(O.jsx)("button",{className:"button",onClick:function(){return function(e,a,n,c){if(s("all"),b([]),"all"!==e||0!==a.length||18!==+n||90!==+c){var r=u().filter((function(e){return e.dob.age>+n&&e.dob.age<+c})),i=[];if(18===+n&&90===+c||(t(r),f(r)),"all"!==e&&a.length){for(var l=r.filter((function(t){return t.gender===e})),o=0;o<l.length;o++)for(var j=0;j<a.length;j++)l[o].nat===a[j]&&i.push(l[o]);return t(i),void f(i)}if("all"!==e)t(r.filter((function(t){return t.gender===e}))),f(r.filter((function(t){return t.gender===e})));else if(a.length){for(var d=0;d<r.length;d++)for(var m=0;m<a.length;m++)r[d].nat===a[m]&&i.push(r[d]);t(i),f(i)}}else t(u())}(r,j,h,_)},children:"Apply filters"}),Object(O.jsx)("button",{className:"button",onClick:function(){var e=u();t(e),localStorage.setItem("filteredPeople",JSON.stringify(e)),s("all"),b([])},children:"Clear filter"})]})},g=function(e){var t=e.users,a=e.setUsers,n=e.button,c=function(e){var t,n=u().filter((function(t){return t.email!==e.email})),c=j().filter((function(t){return t.email!==e.email})),r=b()||[];r.push(e),m(n),f(c),t=r,localStorage.setItem("myFriends",JSON.stringify(t)),a(c)};return Object(O.jsx)(O.Fragment,{children:t.map((function(e){return Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("img",{className:"card__user-photo",src:e.picture.large,alt:e.name.first,draggable:!1}),Object(O.jsxs)("div",{className:"card__user-info",children:[Object(O.jsx)("b",{className:"card__name",children:"".concat(e.name.first," ").concat(e.name.last)}),Object(O.jsx)("a",{className:"card__email",href:"mailto:".concat(e.email),children:e.email}),Object(O.jsx)("a",{className:"card__phone",href:"tel:+".concat(e.phone),children:e.phone}),Object(O.jsx)("div",{className:"card__dob",children:"".concat(e.dob.date.substr(0,10),", (").concat(e.dob.age," y.o.)")}),"add friend"===n&&Object(O.jsx)("button",{onClick:function(){return c(e)},className:"button button__user-card",children:"Add to friends"}),"open chat"===n&&Object(O.jsx)(i.b,{to:"/messages",className:"button button__user-card",children:"Send message"})]})]},e.email)}))})},_=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(15),s=Object(o.a)(r,2),i=s[0],l=s[1],b=Object(n.useState)(j()||u()||[]),d=Object(o.a)(b,2),h=d[0],v=d[1];return Object(n.useEffect)((function(){if(!h.length||a){var e="https://randomuser.me/api/?results=".concat(i,"&inc=gender,email,dob,name,picture,nat,phone");fetch(e).then((function(e){return e.json()})).then((function(e){v(e.results),m(e.results),f(e.results)})),c(!1)}}),[a]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("main",{className:"main",children:[Object(O.jsx)("div",{className:"main__left-bar",children:Object(O.jsx)(p,{setRandomUsers:v})}),Object(O.jsx)("div",{className:"main__users",children:Object(O.jsx)(g,{users:h,setUsers:v,button:"add friend"})})]}),Object(O.jsx)("footer",{className:"footer",children:Object(O.jsx)(x,{numberOfUsers:i,setNumberOfUsers:l,setLoadNewUsers:c})})]})},N=function(){var e=Object(n.useState)(b()||[]),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(O.jsxs)("main",{className:"main",children:[Object(O.jsx)("div",{className:"main__left-bar",children:a.length?Object(O.jsx)(O.Fragment,{}):Object(O.jsx)(i.b,{to:"/fnf",className:"button button__no-friends",children:"Find your friends first"})}),Object(O.jsx)("div",{className:"main__users",children:Object(O.jsx)(g,{users:a,setUsers:c,button:"open chat"})})]})},S=function(){var e=Object(n.useState)("John Doe"),t=Object(o.a)(e,2),a=t[0],c=(t[1],Object(n.useState)("")),r=Object(o.a)(c,2),s=r[0];r[1];return Object(O.jsx)("main",{className:"main",children:Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsx)("img",{className:"profile__avatar",src:s||"https://abroad.ru/images/new_abroad/no-avatar.png",alt:"avatar",draggable:!1}),Object(O.jsx)("h1",{className:"profile__name",children:a})]})})},y=a(11),C=a.n(y),F=a(13),U=a(8),k=a.n(U),A=function(e){var t=e.selectedChat,a=Object(n.useState)(""),c=Object(o.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(d()||[]),l=Object(o.a)(i,2),u=l[0],j=l[1],b=function(){var e=Object(F.a)(C.a.mark((function e(t,a){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return s(""),n={uid:t,from:"user",time:(new Date).toLocaleTimeString(),text:a},c={uid:t,from:"bot",time:(new Date).toLocaleTimeString(),text:""},e.next=7,fetch("https://acobot-brainshop-ai-v1.p.rapidapi.com/get?bid=178&key=sX5A2PcYZbsN5EY6&uid=".concat(t,"&msg=").concat(a),{method:"GET",headers:{"x-rapidapi-host":"acobot-brainshop-ai-v1.p.rapidapi.com","x-rapidapi-key":"c07d60815dmsh74b28067c3f1e0dp109a4ajsn64c2d0a5b6c0"}}).then((function(e){return e.text()})).then((function(e){return c.text=JSON.parse(e).cnt}));case 7:h([].concat(Object(v.a)(u),[n,c])),j(d());case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:t.hasOwnProperty("email")?Object(O.jsxs)("div",{className:"chat-area",children:[u.filter((function(e){return e.uid===t.email})).map((function(e){return Object(O.jsxs)("div",{className:k()("chat-area__text",{"chat-area__text--user":"user"===(null===e||void 0===e?void 0:e.from),"chat-area__text--bot":"bot"===(null===e||void 0===e?void 0:e.from)}),children:[Object(O.jsx)("p",{children:e.text}),Object(O.jsx)("span",{children:e.time})]},null===e||void 0===e?void 0:e.email)})),Object(O.jsxs)("div",{className:"chat-area__send-message",children:[Object(O.jsx)("input",{onKeyPress:function(e){return"Enter"===e.key&&b(t.email,r)},autoFocus:!0,className:"chat-area__message",type:"text",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Message"}),Object(O.jsx)("button",{onClick:function(){return b(t.email,r)},className:"chat-area__button"})]})]}):Object(O.jsx)("h2",{children:"Select chat"})})},I=function(e){var t=e.myFriends,a=e.selectedUser,n=e.setSelectedUser;return Object(O.jsx)(O.Fragment,{children:t.map((function(e){return Object(O.jsxs)("div",{className:k()("message-card",{"message-card--active":a===e.email}),onClick:function(){return n(e.email)},children:[Object(O.jsx)("img",{className:"message-card__photo",src:e.picture.thumbnail,alt:e.name.first,draggable:!1}),Object(O.jsxs)("b",{className:"message-card__name",children:[e.name.first,Object(O.jsx)("br",{}),e.name.last]})]},e.email)}))})},w=function(){var e=b()||[],t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)({}),l=Object(o.a)(s,2),u=l[0],j=l[1];return Object(n.useEffect)((function(){""!==c&&j(e.find((function(e){return e.email===c})))}),[c]),Object(O.jsxs)("main",{className:"main",children:[Object(O.jsx)("div",{className:"main__left-bar",children:e.length?Object(O.jsx)(I,{myFriends:e,selectedUser:c,setSelectedUser:r}):Object(O.jsx)(i.b,{to:"/fnf",className:"button button__no-friends",children:"Find friends to start a conversation"})}),Object(O.jsx)(A,{selectedChat:u})]})},J=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsxs)("header",{className:"header",children:[Object(O.jsxs)("div",{className:"header__logo-title",children:[Object(O.jsx)(i.b,{to:"/",className:"logo"}),Object(O.jsx)("h1",{className:"header__title",children:"friendbook"})]}),Object(O.jsxs)("nav",{className:"nav",children:[Object(O.jsx)(i.c,{to:"/",className:function(e){return"nav__button"+(e.isActive?" nav__button--active":"")},children:"Home"}),Object(O.jsx)(i.c,{to:"/mf",className:function(e){return"nav__button"+(e.isActive?" nav__button--active":"")},children:"My friends"}),Object(O.jsx)(i.c,{to:"/messages",className:function(e){return"nav__button"+(e.isActive?" nav__button--active":"")},children:"Messages"}),Object(O.jsx)(i.c,{to:"/fnf",className:function(e){return"nav__button"+(e.isActive?" nav__button--active":"")},children:"Find new friend"})]})]}),Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"/fnf",element:Object(O.jsx)(_,{})}),Object(O.jsx)(l.a,{path:"/mf",element:Object(O.jsx)(N,{})}),Object(O.jsx)(l.a,{path:"/messages",element:Object(O.jsx)(w,{})}),Object(O.jsx)(l.a,{path:"/",element:Object(O.jsx)(S,{})})]})]})};s.a.render(Object(O.jsx)(i.a,{children:Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(J,{})})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.2c646061.chunk.js.map